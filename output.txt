MapLibre Native WebGPU Demo
============================

Building WebGPU implementation...
âœ“ Build successful

Starting attempt 1...
2025-09-18 22:08:50.383 mbgl-glfw[84910:387663] [DEBUG] {}[Database]: 283recovered 624 frames from WAL file /Users/admin/Library/HTTPStorages/mbgl-glfw/httpstorages.sqlite-wal
2025-09-18 22:08:50.435 mbgl-glfw[84910:387663] [INFO] {}[Render]: TransformParameters: projMatrix[15]=1152.000000 projMatrix[11]=-0.000051 size=1024x768 scale=4.000000
2025-09-18 22:08:50.438 mbgl-glfw[84910:387663] [INFO] {}[Render]: RenderOrchestrator::visitLayerGroups called, group count: 0
2025-09-18 22:08:50.438 mbgl-glfw[84910:387663] [INFO] {}[Render]: RenderOrchestrator::visitLayerGroups called, group count: 0
2025-09-18 22:08:50.438 mbgl-glfw[84910:387663] [INFO] {}[Render]: About to call drawableTargetsPass()
2025-09-18 22:08:50.438 mbgl-glfw[84910:387663] [INFO] {}[Render]: About to call commonClearPass()
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: About to call bindGlobalUniformBuffers()
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: About to call drawableOpaquePass()
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: Starting drawableOpaquePass with 0 layer groups
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: Finished drawableOpaquePass
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: About to call drawableTranslucentPass()
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: Starting drawableTranslucentPass with 0 layer groups
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: RenderOrchestrator::visitLayerGroups called, group count: 0
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: Finished drawableTranslucentPass
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: About to call drawableDebugOverlays()
2025-09-18 22:08:50.440 mbgl-glfw[84910:387663] [INFO] {}[Render]: RenderOrchestrator::visitLayerGroups called, group count: 0
libc++abi: terminating due to uncaught exception of type std::__1::system_error: mutex lock failed: Invalid argument

================================================================================

- Press `S` to cycle through bundled styles
- Press `X` to reset the transform
- Press `N` to reset north
- Press `R` to enable the route demo
- Press `E` to insert an example building extrusion layer
- Press `O` to toggle online connectivity
- Press `Z` to cycle through north orientations
- Press `X` to cycle through the viewport modes
- Press `I` to delete existing database and re-initialize
- Press `A` to cycle through Mapbox offices in the world + dateline monument
- Press `B` to cycle through the color, stencil, and depth buffer
- Press `D` to cycle through camera bounds: inside, crossing IDL at left, crossing IDL at right, and disabled
- Press `T` to add custom geometry source
- Press `F` to enable feature-state demo
- Press `U` to toggle pitch bounds
- Press `H` to take a snapshot of a current map.
- Press `J` to take a snapshot of a current map with an extrusions overlay.
- Press `Y` to start a camera fly-by demo

- Press `1` through `6` to add increasing numbers of point annotations for testing
- Press `7` through `0` to add increasing numbers of shape annotations for testing

- Press `Q` to query annotations
- Press `C` to remove annotations
- Press `K` to add a random custom runtime imagery annotation
- Press `L` to add a random line annotation
- Press `W` to pop the last-added annotation off
- Press `V` to toggle custom drawable layer
- Press `B` to toggle rendering stats
- Press `P` to pause tile requests

- Hold `Control` + mouse drag to rotate
- Hold `Shift` + mouse drag to tilt

- Press `F1` to generate a render test for the current view

- Press `Tab` to cycle through the map debug options
- Press `F6` to cycle through Tile LOD modes
- Press `F7` to lower the zoom level without changing the camera
- Press `F8` to higher the zoom level without changing the camera
- Press `Esc` to quit

================================================================================

./run_webgpu.sh: line 33: 84910 Abort trap: 6           ./build/platform/glfw/mbgl-glfw --style "$STYLE_URL" --zoom 2
  Attempt 1 failed

Failed to start the WebGPU demo.
This can happen if Dawn cannot initialize the adapter.

Troubleshooting:
1. Wait a few seconds and try again
2. Check Activity Monitor for stuck mbgl-glfw processes
3. Restart your terminal
4. If persistent, reboot your Mac to reset Metal state
