if(NOT MLN_WITH_OPENGL)
    return()
endif()

message(STATUS "Configuring OpenGL ES backend")
target_compile_definitions(
        mbgl-core
        PUBLIC
        MLN_RENDER_BACKEND_OPENGL=1
        "MLN_USE_UNORDERED_DENSE=$<BOOL:${MLN_USE_UNORDERED_DENSE}>"
)
list(APPEND
        INCLUDE_FILES
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/renderable_resource.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/renderer_backend.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/platform/gl_functions.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/shader_manifest.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/shader_group_gl.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/prelude.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/background.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/background_pattern.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/circle.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/clipping_mask.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/collision_box.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/collision_circle.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/custom_geometry.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/custom_symbol_icon.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/debug.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/fill.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/fill_outline.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/fill_pattern.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/fill_outline_pattern.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/fill_outline_triangulated.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/fill_extrusion.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/fill_extrusion_pattern.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/heatmap.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/heatmap_texture.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/hillshade_prepare.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/hillshade.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/line.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/line_gradient.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/line_pattern.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/line_sdf.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/location_indicator.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/location_indicator_textured.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/raster.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/symbol_icon.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/symbol_sdf.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/symbol_text_and_icon.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/wide_vector.hpp
)
list(APPEND
        SRC_FILES
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/attribute.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/attribute.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/command_encoder.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/command_encoder.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/context.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/context.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/fence.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/fence.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/debugging_extension.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/debugging_extension.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/defines.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/draw_scope_resource.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/enum.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/enum.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/extension.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/framebuffer.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/index_buffer_resource.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/index_buffer_resource.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/object.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/object.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/offscreen_texture.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/offscreen_texture.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/render_pass.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/render_pass.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/renderbuffer_resource.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/renderbuffer_resource.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/renderer_backend.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/resource_pool.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/resource_pool.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/state.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/timestamp_query_extension.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/timestamp_query_extension.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/types.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/uniform.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/uniform.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/upload_pass.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/upload_pass.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/value.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/value.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/vertex_array.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/vertex_array.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/vertex_buffer_resource.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/vertex_buffer_resource.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/platform/gl_functions.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/shaders/gl/legacy/clipping_mask_program.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/shaders/gl/legacy/program_base.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/shaders/gl/legacy/program.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/shaders/gl/legacy/programs.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/shaders/gl/legacy/programs.hpp
)

list(APPEND INCLUDE_FILES
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/background_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/circle_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/collision_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/custom_drawable_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/debug_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/fill_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/fill_extrusion_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/heatmap_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/heatmap_texture_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/hillshade_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/hillshade_prepare_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/line_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/location_indicator_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/raster_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/shader_defines.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/symbol_layer_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/widevector_ubo.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/style/layers/custom_drawable_layer.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/layermanager/custom_drawable_layer_factory.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/shaders/gl/shader_program_gl.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/buffer_allocator.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/drawable_gl.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/drawable_gl_builder.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/layer_group_gl.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/uniform_buffer_gl.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/vertex_attribute_gl.hpp
        ${PROJECT_SOURCE_DIR}/include/mbgl/gl/texture2d.hpp
)
list(APPEND SRC_FILES
        ${PROJECT_SOURCE_DIR}/src/mbgl/shaders/gl/shader_info.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/shaders/gl/shader_program_gl.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/buffer_allocator.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/drawable_gl.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/drawable_gl_builder.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/drawable_gl_impl.hpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/layer_group_gl.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/texture2d.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/uniform_buffer_gl.cpp
        ${PROJECT_SOURCE_DIR}/src/mbgl/gl/vertex_attribute_gl.cpp
)
